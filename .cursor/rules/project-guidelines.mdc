---
description: 
globs: 
alwaysApply: true
---
The following rules should always be followed.

# Project Structure & Technologies
- This project is a Turborepo using Bun as the package manager.
- **Structure:**
    - `apps/backend`: HonoJS backend.
    - `apps/frontend`: ReactJS frontend (Vite, Tanstack Router/Query).
    - `packages/data`: Static data (e.g., permissions).
    - `packages/ui`: UI components (primarily Shadcn).
    - `packages/validation`: Zod validation schemas (used by both backend and frontend).

# Backend (`apps/backend`)
- **Framework:** HonoJS.
- **Database:**
    - ORM: Drizzle ORM with PostgreSQL.
    - Schema Location: `apps/backend/src/drizzle/schema/[modelName]Schema.ts`.
    - Schema Imports: Import all schemas into `apps/backend/src/drizzle/index.ts` and add them to the Drizzle initialization.
    - Use `drizzle-orm/pg-core` for imports.
    - Prefer Drizzle query (`db.query...`) over `db.select()`.
- **Routing:**
    - Routes/Handlers: Colocate in `apps/backend/src/routes/[name]Route.ts`. Split into separate files if a route handles many endpoints.
    - Permissions: Protect routes with permission checks where applicable.
- **Environment Variables:** Retrieve from `apps/backend/src/appEnv.ts`.
- **Templates:** Find templates in `apps/backend/turbo/generators/templates`.

# Frontend (`apps/frontend`)
- **Framework/Libs:** ReactJS, Vite, Tanstack Router, Tanstack Query.
- **API Communication:**
    - Use Hono RPC via the client in `apps/frontend/src/honoClient.ts`.
    - Use the `fetchRPC()` function from `apps/frontend/src/utils/fetchRPC.ts` for backend calls. Example: `await fetchRPC(client.users.$get);`
- **Templates:** Find page templates in `apps/frontend/turbo/generators/templates/page-template`.

# General Development Rules
- **TypeScript:**
    - Avoid using the `any` type. Use specific types or `unknown`.
    - Use the null-coalescing operator (`??`) instead of logical OR (`||`) for default values.
- **Documentation:** Add clear documentation (JSDoc style) for functions, potentially ambiguous code blocks, variables, and types.
- **UI/UX:** Ensure UI components and user experience are optimal. Use components from `packages/ui` (Shadcn) where appropriate.
- **Security:** Review all code changes for potential security vulnerabilities.
- **Operations:**
    - Do not run database migrations automatically.
    - Do not run commands to start development servers automatically.
